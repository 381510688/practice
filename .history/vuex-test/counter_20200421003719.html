<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>vuex demo</title>

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://unpkg.com/vuex"></script>
</head>
<body>
    <div id="app">
        <p>{{count}}</p>
        <button @click="add">增加</button>
    </div>

    <script type="module">
       Vue.use(Vuex)

//        import {mapActions, mapState} from 'Vuex';
let {mapActions, mapState} = window.Vuex;

        const store = new Vuex.Store({
          state() {
            return {
              count: 0
            }
          },
          mutations: {
            increment (state) {
              state.count++
            }
          },
          actions: {
            getData ({commit}) {
              setTimeout(() => {
                commit('increment')
              })
            }
          },
          getters: {
            getCount () {
              return count
            }
          }
        })

        const app = new Vue({
          el: '#app',
          store,
          data() {},
          computed: {
            ...mapState(['count']),

//            count () {
//              return this.$store.state.count
//            }

          },
          methods: {
            ...mapActions(['getData']),
            add () {
              this.getData()
//              this.$store.dispatch('getData')
            }
          }
        })
    </script>
</body>
</html>