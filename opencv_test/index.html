<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <script src='./tesseract.min.js'></script>
  <script src="./opencv.js" type="text/javascript"></script>
</head>

<body>
  <div>
    <img id="authcode" src="./authcode.png" />
    <canvas id="step1"></canvas>
  </div>

  <script type="text/javascript">
    window.onload = function () {
      let srcmat = cv.imread('authcode')  

      // 图形灰度化
      let dstMat = new cv.Mat()
      cv.Canny(srcmat, dstMat, 255, 255, 3, true);
      cv.imshow('step1', dstMat)


      let dstCanvas = document.querySelector('#step1')
      console.log(123, dstCanvas)
      Tesseract.recognize(
        dstCanvas,
        'eng',
        { logger: m => console.log(m) }
      ).then(({ data: { text } }) => {
        console.log(text);
      })

    }
  </script>


</body>

</html>